<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>RSample</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Tidymodels @ Bigelow</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Overview</a>
</li>
<li>
  <a href="RSample.html">RSample</a>
</li>
<li>
  <a href="Recipes.html">Recipes</a>
</li>
<li>
  <a href="Parsnip.html">Parsnip</a>
</li>
<li>
  <a href="Yardstick.html">Yardstick</a>
</li>
<li>
  <a href="Workflows.html">Workflows</a>
</li>
<li>
  <a href="WorkflowSets.html">WorkflowSets</a>
</li>
<li>
  <a href="Tune.html">Tune</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Iris.html">Ex. Iris</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">RSample</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#training-testing-splits">Training / Testing Splits</a></li>
<li><a href="#resampling">Resampling</a>
<ul>
<li><a href="#validation-set">Validation Set</a></li>
<li><a href="#v-fold-cross-validation">V-Fold Cross Validation</a></li>
<li><a href="#monte-carlo-cross-validation">Monte-Carlo Cross Validation</a></li>
<li><a href="#other-resampling-methods">Other Resampling Methods</a></li>
</ul></li>
<li><a href="#further-resources">Further Resources</a></li>
</ul>
</div>

<p>When building a model, the source dataset needs to be split in some way so that we can reserve data to both build the model and assess its performance. <a href="https://rsample.tidymodels.org/">RSample</a> contains tools for dataset splitting and resampling.</p>
<p><br></p>
<div id="training-testing-splits" class="section level2">
<h2>Training / Testing Splits</h2>
<p>To create a randomly divided training/testing split using RSample, we can use the <a href="https://rsample.tidymodels.org/reference/initial_split.html"><code>initial_split()</code></a> function. This function generates an <code>rsplit</code> object that contains partitioning information for the data.</p>
<ul>
<li>To create a time-based testing/training split, use the <code>initial_time_split()</code> function. This function works identically to <code>initial_split()</code> except that it will use the <em>first</em> <code>prop</code> samples for training instead of a random selection.</li>
</ul>
<pre class="r"><code># data_iris is defined in &#39;Overview&#39;
data_split &lt;- initial_split(data_iris, 
                prop = 3/4) # proportion of data to use for training

data_split</code></pre>
<pre><code>## &lt;Analysis/Assess/Total&gt;
## &lt;112/38/150&gt;</code></pre>
<p>To retrieve the training and testing datasets from an <code>rsplit</code> object, use the <code>testing()</code> and <code>training()</code> functions</p>
<pre class="r"><code># using training() and testing() to retrieve datasets
data_test &lt;- testing(data_split)
data_train &lt;- training(data_split)

head(data_test)</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species row
## 3           4.7         3.2          1.3         0.2  setosa   3
## 4           4.6         3.1          1.5         0.2  setosa   4
## 5           5.0         3.6          1.4         0.2  setosa   5
## 8           5.0         3.4          1.5         0.2  setosa   8
## 11          5.4         3.7          1.5         0.2  setosa  11
## 16          5.7         4.4          1.5         0.4  setosa  16</code></pre>
<p><br></p>
</div>
<div id="resampling" class="section level2">
<h2>Resampling</h2>
<p><em>If you are building your first model, skip this section!</em></p>
<p>When building a model, we usually want to estimate the performance of the model <strong>before</strong> we evaluate it with the testing set. Resampling encompasses various techniques to split the training set so that we can estimate model performance prior to polishing and assessing with the testing set.</p>
<p><br></p>
<div id="validation-set" class="section level3">
<h3>Validation Set</h3>
<p>A validation set is a single analysis/assessment split performed on the training data. It’s best for large datasets, where we might not need multiple resamples to understand performance.</p>
<p>Use <a href="https://rsample.tidymodels.org/reference/validation_split.html"><code>validation_split()</code></a> and <code>validation_time_split()</code> to create a validation split or time-based validation split, respectively.</p>
<pre class="r"><code>validate &lt;- validation_split(data_train, 
                             prop = 3/4, # proportion for analysis set
                             strata = Species)

validate</code></pre>
<pre><code>## # Validation Set Split (0.75/0.25)  using stratification 
## # A tibble: 1 × 2
##   splits          id        
##   &lt;list&gt;          &lt;chr&gt;     
## 1 &lt;split [83/29]&gt; validation</code></pre>
<p>We can retrieve data from a specific split object using <code>analysis()</code> and <code>assessment()</code>.</p>
<ul>
<li><strong>Note:</strong> although <code>analysis()</code> and <code>assessment()</code> support additional arguments, when simply passed an <code>rsplit</code> object they act identically to <code>training()</code> and <code>testing()</code>. The names are different to distinguish resampling from the original train/test split.</li>
</ul>
<pre class="r"><code># extracting rsplit object
v_split &lt;- validate[[1]][[1]]

# pulling analysis set 
analysis(v_split) |&gt; head()</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species row
## 23          4.6         3.6          1.0         0.2  setosa  23
## 28          5.2         3.5          1.5         0.2  setosa  28
## 40          5.1         3.4          1.5         0.2  setosa  40
## 7           4.6         3.4          1.4         0.3  setosa   7
## 45          5.1         3.8          1.9         0.4  setosa  45
## 26          5.0         3.0          1.6         0.2  setosa  26</code></pre>
<p><br></p>
</div>
<div id="v-fold-cross-validation" class="section level3">
<h3>V-Fold Cross Validation</h3>
<p>V-fold cross validation splits a dataset into <em>n</em> parts, creating resamples where each part takes a turn being the validation set. V-fold cross validation sets are useful to create averaged accuracy estimates.</p>
<p>Use <a href="https://rsample.tidymodels.org/reference/vfold_cv.html"><code>vfold_cv()</code></a> to create folds in your data. This function returns a table with a data split object and identification variable for each fold.</p>
<pre class="r"><code>data_folds &lt;- vfold_cv(data_train, 
                       v = 5, # number of partitions in dataset 
                       repeats = 1, # times to repeat partitioning
                       strata = Species) # (optional) variable used for stratified sampling

data_folds</code></pre>
<pre><code>## #  5-fold cross-validation using stratification 
## # A tibble: 5 × 2
##   splits          id   
##   &lt;list&gt;          &lt;chr&gt;
## 1 &lt;split [88/24]&gt; Fold1
## 2 &lt;split [89/23]&gt; Fold2
## 3 &lt;split [90/22]&gt; Fold3
## 4 &lt;split [90/22]&gt; Fold4
## 5 &lt;split [91/21]&gt; Fold5</code></pre>
<p><br></p>
</div>
<div id="monte-carlo-cross-validation" class="section level3">
<h3>Monte-Carlo Cross Validation</h3>
<p>Monte-Carlo cross validation is similar to v-fold cross validation, except that each resample is created by randomly sampling the original dataset – meaning that there may be overlap between each resamples’s analysis set. Use <a href="https://rsample.tidymodels.org/reference/mc_cv.html"><code>mc_cv()</code></a> to create these kinds of resamples.</p>
<pre class="r"><code>mc_split &lt;- mc_cv(data_train, 
                  prop = 9/10, # proportion to use for analysis per resample
                  times = 20, # number of resamples
                  strata = Species)

head(mc_split)</code></pre>
<pre><code>## # A tibble: 6 × 2
##   splits           id        
##   &lt;list&gt;           &lt;chr&gt;     
## 1 &lt;split [100/12]&gt; Resample01
## 2 &lt;split [100/12]&gt; Resample02
## 3 &lt;split [100/12]&gt; Resample03
## 4 &lt;split [100/12]&gt; Resample04
## 5 &lt;split [100/12]&gt; Resample05
## 6 &lt;split [100/12]&gt; Resample06</code></pre>
<p><br></p>
</div>
<div id="other-resampling-methods" class="section level3">
<h3>Other Resampling Methods</h3>
<p>There are a variety of other resampling methods supported by <code>RSample</code>. A subset of other important resampling methods are below:</p>
<ul>
<li><strong>Bootstrapping</strong>: <a href="https://rsample.tidymodels.org/reference/bootstraps.html"><code>bootstraps()</code></a> creates random resamples <em>with replacement</em>, allowing duplicates in the training sets.</li>
<li><strong>Rolling Forecast Origin</strong>: <a href="https://rsample.tidymodels.org/reference/rolling_origin.html"><code>rolling_origin()</code></a> creates resamples for datasets with a strong time-based component. Training sets are selected sequentially, with origin point shifting by a set amount.</li>
<li><strong>Leave-One-Out</strong>: <a href="https://rsample.tidymodels.org/reference/loo_cv.html"><code>loo_cv()</code></a> creates resamples where one point is held out for assessment and all others are used for analysis. There are as many resamples as data points.</li>
</ul>
<p>For a full list of resampling techniques, visit the official <a href="https://rsample.tidymodels.org/reference/index.html">RSample Reference</a>.</p>
<p><br></p>
</div>
</div>
<div id="further-resources" class="section level2">
<h2>Further Resources</h2>
<ul>
<li><a href="https://rsample.tidymodels.org/articles/Working_with_rsets.html" class="uri">https://rsample.tidymodels.org/articles/Working_with_rsets.html</a>
<ul>
<li>A helpful example of working with cross validation folds. Also covers using RSample for the bootstrap method, which isn’t touched on here.</li>
</ul></li>
<li><a href="https://www.tmwr.org/resampling.html" class="uri">https://www.tmwr.org/resampling.html</a>
<ul>
<li>goes more in depth about all of the methods mentioned here, and touches on parallel processing/saving objects.</li>
</ul></li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
