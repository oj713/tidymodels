---
title: "RSample"
output: html_document
---

```{r, echo = FALSE, message = FALSE}
source("setup.R")
```

https://rsample.tidymodels.org/

When building a model, the source dataset usually needs to be split up somehow. RSample contains tools for dataset splitting and resampling. 

<br>

# Training / Testing Splits #

To create a randomly divided training/testing split using RSample, we can use the `initial_split()` function. This function generates an `rsplit` object that contains partitioning information for the data. 

  * To create a time-based testing/training split, use the `initial_time_split()` function. This function works identically to `initial_split()` except that it will use the *first* `prop` samples for training instead of a random selection. 

```{r}
# data_iris is defined in 'Overview'
data_split <- initial_split(data_iris, 
                prop = 3/4) # proportion of data to use for training

data_split
```

To retrieve the actual training and testing data, use the `testing()` and `training()` functions 

```{r}
# using training() and testing() to retrieve datasets
data_test <- testing(data_split)
data_train <- training(data_split)

head(data_test)
```

<br>

# Resampling #

When building a model, we usually want to estimate the performance of the model **before** we evaluate it with the testing set. 

### Validation Set ###

### V-Fold Cross Validation ### 

Use `vfold_cv()` to create folds in your data. This function returns a table with a data split object and identification variable for each fold. 

```{r}
data_folds <- vfold_cv(data_train, 
                       v = 5, # number of partitions in dataset 
                       repeats = 1, # times to repeat partitioning
                       strata = Species) # (optional) variable used for stratified sampling

data_folds
```

We can retrieve data from a specific split object using `analysis()` and `assessment()`.

* **Note:** although `analysis()` and `assessment()` support additional arguments, when simply passed an `rsplit` object they act identically to `training()` and `testing()` and can probably be used interchangeably. 

```{r}
# working with Fold1
split <- data_folds$splits[[1]]

testing <- testing(split)
assessment <- assessment(split)
identical(testing, assessment)
```

### Monte-Carlo Cross Validation ###

### Bootstrapping ###

### Rolling Forecasting Origin Resampling ###

<br>

# Further Resources #

* https://rsample.tidymodels.org/articles/Working_with_rsets.html
  *  A helpful example of working with cross validation folds. Also covers using RSample for the bootstrap method, which isn't touched on here. 
* https://www.tmwr.org/resampling.html
  * goes more in depth about all of the methods mentioned here, and touches on parallel processing/saving objects. 